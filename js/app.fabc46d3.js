(function(){"use strict";var e={6513:function(e,t,i){var n=i(5130),o=i(6768);function r(e,t,i,n,r,s){const c=(0,o.g2)("ThreeScene");return(0,o.uX)(),(0,o.Wv)(c)}var s=i(4232);const c={style:{width:"100vw",height:"100vh",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},a={ref:"threeContainer",style:{width:"100%",height:"90%"}},d=["disabled"];function h(e,t,i,n,r,h){return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",a,null,512),(0,o.Lk)("button",{disabled:r.isRolling,onClick:t[0]||(t[0]=(...e)=>h.rollDice&&h.rollDice(...e)),style:(0,s.Tr)([{"margin-top":"20px",padding:"10px 20px","font-size":"16px","background-color":"rgba(255, 255, 255, 0.5)",border:"none","border-radius":"5px",color:"#000",cursor:"pointer",opacity:"0.8"},r.isRolling?"cursor: not-allowed; opacity: 0.5;":""])}," Вращать кубики ",12,d)])}var l=i(8371),u=i(8776),p=i(1353),f={name:"TwoDice",data(){return{isRolling:!1,initialRotationSpeed:{x:.08,y:.08,z:.05},diceRotationSpeed:{x:.08,y:.08,z:.05}}},mounted(){this.initScene()},methods:{scene:null,camera:null,renderer:null,dice1:null,dice2:null,initScene(){const e=this.$refs.threeContainer;this.scene=new l.Z58,this.camera=new l.ubm(50,e.clientWidth/e.clientHeight,.1,1e3),this.camera.position.z=6,this.renderer=new u.JeP({antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement),this.createGradientBackground();const t=new l.$p8(16777215,.7);this.scene.add(t);const i=new l.ZyN(16777215,.6);i.position.set(-5,5,5),this.scene.add(i);const n=new l.ZyN(16777215,.6);n.position.set(5,5,5),this.scene.add(n);const o=new p.B;o.load("/models/Dice_03.glb",(e=>{this.dice1=e.scene.clone(!0),this.dice2=e.scene.clone(!0),this.positionDice(this.dice1,-1.5),this.positionDice(this.dice2,1.5),this.scene.add(this.dice1),this.scene.add(this.dice2),this.animate()}),void 0,(e=>{console.error("Ошибка загрузки модели:",e)})),window.addEventListener("resize",this.onWindowResize)},createGradientBackground(){const e=new l.GOR(this.generateGradient()),t=new l.bdM(20,20),i=new l.V9B({map:e}),n=new l.eaF(t,i);n.position.z=-10,this.scene.add(n)},generateGradient(){const e=document.createElement("canvas");e.width=512,e.height=512;const t=e.getContext("2d"),i=t.createRadialGradient(e.width/2,e.height/2,50,e.width/2,e.height/2,e.width/2);return i.addColorStop(0,"#031706"),i.addColorStop(1,"#000"),t.fillStyle=i,t.fillRect(0,0,e.width,e.height),e},positionDice(e,t){const i=(new l.NRn).setFromObject(e),n=i.getCenter(new l.Pq0),o=i.getSize(new l.Pq0).length();e.position.set(t-n.x,-n.y,-n.z);const r=2/o;e.scale.set(r,r,r),e.rotation.set(0,0,0)},animate(){requestAnimationFrame((()=>this.animate())),this.renderer.render(this.scene,this.camera)},onWindowResize(){const e=this.$refs.threeContainer;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(e.clientWidth,e.clientHeight)},rollDice(){if(this.isRolling||!this.dice1||!this.dice2)return;this.isRolling=!0,this.diceRotationSpeed={...this.initialRotationSpeed};const e=3e3,t=1e3,i=performance.now(),n=o=>{const r=o-i;if(r<e){if(this.dice1.rotation.x+=this.diceRotationSpeed.x,this.dice1.rotation.y+=this.diceRotationSpeed.y,this.dice1.rotation.z+=this.diceRotationSpeed.z,this.dice2.rotation.x+=this.diceRotationSpeed.x,this.dice2.rotation.y+=1.2*this.diceRotationSpeed.y,this.dice2.rotation.z+=this.diceRotationSpeed.z,r>t){const i=(e-r)/(e-t);this.diceRotationSpeed.x=this.initialRotationSpeed.x*i,this.diceRotationSpeed.y=this.initialRotationSpeed.y*i,this.diceRotationSpeed.z=this.initialRotationSpeed.z*i}requestAnimationFrame(n)}else this.isRolling=!1};requestAnimationFrame(n)}},beforeUnmount(){window.removeEventListener("resize",this.onWindowResize)}},w=i(1241);const g=(0,w.A)(f,[["render",h]]);var m=g,v={name:"App",components:{ThreeScene:m}};const R=(0,w.A)(v,[["render",r]]);var b=R;(0,n.Ef)(b).mount("#app")}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,n,o,r){if(!n){var s=1/0;for(h=0;h<e.length;h++){n=e[h][0],o=e[h][1],r=e[h][2];for(var c=!0,a=0;a<n.length;a++)(!1&r||s>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[a])}))?n.splice(a--,1):(c=!1,r<s&&(s=r));if(c){e.splice(h--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[n,o,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,s=n[0],c=n[1],a=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in c)i.o(c,o)&&(i.m[o]=c[o]);if(a)var h=a(i)}for(t&&t(n);d<s.length;d++)r=s[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(h)},n=self["webpackChunkkubik"]=self["webpackChunkkubik"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(6513)}));n=i.O(n)})();
//# sourceMappingURL=app.fabc46d3.js.map